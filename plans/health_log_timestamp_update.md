# 健康ログ記録の時刻対応 事前計画

- **目的**: 健康ログを日付単位ではなく、分解能を持つ時刻 (`recorded_at`) で保存できるようにし、同一日に複数回の状態変化を記録できるようにする。
- **対象範囲**:
  - データモデル: `HealthLog` の日付カラムを日時カラムに置き換え、必要に応じて関連バリデーションを更新する。
  - フロントエンド: フォームで日時を分単位で入力できる UI を整備し、既存の「日付」入力を置換する。
  - コントローラ/API: Strong Parameters とレスポンスを `recorded_at` に対応させる。
  - 表示/サマリー: 時刻付きデータを扱えるように並び順・表示フォーマットを見直す。
- **検討事項**:
  - 既存データ移行: `logged_on` など日付データを持つレコードがある場合の変換手順。
  - タイムゾーン: `recorded_at` のタイムゾーン統一 (Rails の `Time.zone` を利用)。
  - フォーム入力: ブラウザの datetime-local を利用するか、時間選択 UI を独自に用意するかを検討。
- **テスト計画**:
  - モデルテストで `recorded_at` の必須制約と並び順を検証。
  - コントローラ/システムテストで分単位の記録が登録・表示できることを確認。
  - サマリー計算が期待通り日単位で集計できるか回帰テストを追加。

> 実装着手前に、既存のマイグレーションやフォームで `logged_on` を参照している箇所を棚卸しし、影響範囲を洗い出す。
