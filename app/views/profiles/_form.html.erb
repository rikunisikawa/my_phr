<%= form_with model: @profile, url: profile_path, method: :patch, local: true do |f| %>
  <div class="row g-3">
    <div class="col-md-4">
      <%= f.label :age, "年齢", class: "form-label" %>
      <%= f.number_field :age, class: "form-control", min: 0, max: 120 %>
    </div>
    <div class="col-md-4">
      <%= f.label :height_cm, "身長(cm)", class: "form-label" %>
      <%= f.number_field :height_cm, class: "form-control", step: 0.1, min: 50, max: 250 %>
    </div>
    <div class="col-md-4">
      <%= f.label :weight_kg, "体重(kg)", class: "form-label" %>
      <%= f.number_field :weight_kg, class: "form-control", step: 0.1, min: 10, max: 300 %>
    </div>
  </div>

  <div class="mt-4">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h3 class="h6 mb-0">カスタム項目</h3>
      <% if @profile_custom_fields.any? %>
        <%= link_to "設定を編集", custom_fields_path(anchor: "profile"), class: "btn btn-outline-secondary btn-sm" %>
      <% end %>
    </div>
    <% if @profile_custom_fields.any? %>
      <%= render "custom_fields/inputs",
                 fields: @profile_custom_fields,
                 values: @profile.custom_fields || {},
                 form_prefix: "profile" %>
    <% else %>
      <p class="text-muted small mb-2">カスタム項目は現在設定されていません。</p>
      <%= link_to "カスタム項目を設定する", custom_fields_path(anchor: "profile"), class: "btn btn-outline-secondary btn-sm" %>
    <% end %>
  </div>

  <div class="mt-4 d-flex gap-2">
    <%= f.submit "保存する", class: "btn btn-primary" %>
    <%= link_to "キャンセル", profile_path, class: "btn btn-outline-secondary" %>
  </div>
<% end %>
