# Codex活用型 開発プロセスルール

このリポジトリでは、OpenAI Codex を活用した開発を効率的かつ安全に進めるため、以下のルールに従います。

## 0. プロジェクト準備
- **リポジトリ構成**
  - `README.md` にはプロジェクトの目的、前提条件、実行方法を簡潔に記載します。
  - `AGENTS.md` には Codex が操作する際のルールや利用可能なコマンド（テスト・ビルド手順など）を明記します。
  - 必要に応じて `.codexignore` を設定し、Codex の操作対象外とするディレクトリやファイルを定義します。
- **環境確認**
  - Codex が利用する仮想環境でビルド・テストが完了することを事前に確認します（ローカル / クラウドを問わず）。
  - ユーザー認証情報や秘密情報は一切含めません。Codex は外部 API やインターネットへアクセスできない前提で運用します。

## 1. 開発仕様の整理と ExecPlan 作成
- **機能要件の明確化**
  - 目的、入力 / 出力仕様、成功条件を明確に定義します。
- **ExecPlan（実行計画）の作成**
  - 実装概要、実装方針、テスト方法を体系的にまとめます。
  - 例: CSV を読み込み月次売上グラフを描画する CLI アプリの計画では、pandas による読み込み、月単位の集計、matplotlib での描画、引数でのファイル指定、pytest を用いた検証などを記述します。
  - ExecPlan を Codex に提示し、「この ExecPlan に基づいて作業を開始してください」と明示的に指示します。

## 2. Codex へのプロンプト設計と実装依頼
- 1 タスク 1 プロンプトで依頼し、5～15 分程度で完了する粒度に分割します。
- プロンプトには参照する計画や必要なステップを箇条書きで記載します。
- Codex が提示したコードは開発者がレビューし、可読性・例外処理・入力検証の有無を確認したうえで次のタスクに進みます。

## 3. テスト・検証・コミット
- Codex には必要なテストコードの生成や既存テストの修正を依頼します。
- `pytest` など具体的なコマンドを示し、テスト実行を指示します。
- Codex には変更をコミットさせ、ログを提示させます。問題がある場合は改善事項を明確に伝え、再度対応させます。

## 4. リファクタリングと改善ループ
- コードの可読性向上やテストカバレッジ拡大など、改善提案を Codex に求めます。
- 必要に応じて PR 作成まで依頼し、変更点を整理します。

## 5. タスク管理・マイルストーン化（オプション）
- 複数機能を開発する際は、各機能ごとに ExecPlan を用意し、Codex へタスクとして指示します。
- 人間がレビューしながら統合し、GitHub Projects や Issue テンプレートを併用して進捗を管理します。

## 運用の心得
- Codex との会話は途中介入ができないため、プロンプトと ExecPlan は明確かつ丁寧に記述します。
- 各タスクには完了条件と出力形式を指定し、意図しない挙動を防ぎます。
- Codex の出力に誤解があった場合は原因を分析し、プロンプト改善に活かします。
- 開発者は「マネージャー」として設計・判断に集中し、実装は Codex に任せる方針を徹底します。
